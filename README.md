# Explore With Me Plus

[üá¨üáß English version](README_EN.md)

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Explore With Me** ‚Äî —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-–∞—Ñ–∏—à–∞, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –¥–µ–ª–∏—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ –Ω–∏—Ö.

---

## üöÄ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã

### ‚úÖ –≠—Ç–∞–ø 1: –°–µ—Ä–≤–∏—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (Stats Service)
–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–±–æ—Ä–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å–µ—â–µ–Ω–∏–π —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º (`POST /hit`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (`GET /stats`)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º IP-–∞–¥—Ä–µ—Å–∞–º
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∞—Ç –∏ —Å–ø–∏—Å–∫—É URI

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Spring Boot 3.5.0
- Spring Data JPA
- PostgreSQL
- MapStruct
- Lombok

### ‚úÖ –≠—Ç–∞–ø 2: –ö–ª–∏–µ–Ω—Ç —Å–µ—Ä–≤–∏—Å–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (Stats Client)
HTTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–µ—Ä–≤–∏—Å–æ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞—Ö —Å–æ–±—ã—Ç–∏–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

### ‚úÖ –≠—Ç–∞–ø 3: –°–±–æ—Ä–∫–∞ DTO (Data Transfer Objects)
–û–±—â–∏–µ DTO-–∫–ª–∞—Å—Å—ã –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.

**–ö–ª–∞—Å—Å—ã:**
- `EndpointHitDto` ‚Äî –¥–∞–Ω–Ω—ã–µ –æ –ø–æ—Å–µ—â–µ–Ω–∏–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- `ViewStatsDto` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

### ‚úÖ –≠—Ç–∞–ø 4: –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å - –ú–æ–¥—É–ª—å —Å–æ–±—ã—Ç–∏–π (Main Service - Events)
–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è–º–∏ ‚Äî –∫–ª—é—á–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- **–ü—É–±–ª–∏—á–Ω—ã–π API:** –ü—Ä–æ—Å–º–æ—Ç—Ä –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π API:** –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π API:** –ú–æ–¥–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π (–ø—É–±–ª–∏–∫–∞—Ü–∏—è/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ), —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏

**REST API:**
- `GET /events` ‚Äî –ü—É–±–ª–∏—á–Ω—ã–π –ø–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (—Ç–µ–∫—Å—Ç, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø–ª–∞—Ç–Ω–æ—Å—Ç—å, –¥–∞—Ç—ã)
- `GET /events/{id}` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –ø–æ ID
- `POST /users/{userId}/events` ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- `GET /users/{userId}/events` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PATCH /users/{userId}/events/{eventId}` ‚Äî –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º
- `GET /admin/events` ‚Äî –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π
- `PATCH /admin/events/{eventId}` ‚Äî –ú–æ–¥–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

**–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö:**
- `Event` ‚Äî –û—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏—è (–Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –¥–∞—Ç–∞, –ª–æ–∫–∞—Ü–∏—è, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä)
- `Location` ‚Äî –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —Å—É—â–Ω–æ—Å—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ (—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞)
- `EventState` ‚Äî –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π (PENDING, PUBLISHED, CANCELED)
- `User`, `Category` ‚Äî –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Spring Boot 3.5.0
- Spring Data JPA (Specifications, Criteria API)
- PostgreSQL 16
- MapStruct
- Bean Validation
- 201 unit-—Ç–µ—Å—Ç

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
explore-with-me/
‚îú‚îÄ‚îÄ main-service/           # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ event/              # –ú–æ–¥—É–ª—å —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controller/     # Public/Private/Admin –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository/     # JPA —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/            # DTO —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model/          # JPA-—Å—É—â–Ω–æ—Å—Ç–∏ (Event, Location)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mapper/         # MapStruct –º–∞–ø–ø–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ user/               # –ú–æ–¥—É–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ category/           # –ú–æ–¥—É–ª—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ config/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (StatsClient)
‚îÇ   ‚îî‚îÄ‚îÄ exception/          # –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ stats-service/          # –°–µ—Ä–≤–∏—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ stats-dto/          # –û–±—â–∏–µ DTO
‚îÇ   ‚îú‚îÄ‚îÄ stats-client/       # HTTP-–∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ stats-server/       # REST API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îî‚îÄ‚îÄ pom.xml                 # –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π POM
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è |
|------------|--------|
| Java | 21 LTS |
| Spring Boot | 3.5.0 |
| PostgreSQL | 16 |
| Maven | 3.9+ |
| Docker | 24+ |
| MapStruct | 1.5.5 |
| Lombok | 1.18.32 |
| JUnit 5 | 5.11.4 |
| Mockito | 5.x |

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –° –ø–æ–º–æ—â—å—é Docker Compose

```bash
docker-compose up -d
```

### –õ–æ–∫–∞–ª—å–Ω–æ

```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
mvn clean package

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
cd stats-service
mvn spring-boot:run
```

---

## üì° API Endpoints

### Stats Service (–ø–æ—Ä—Ç 9090)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/hit` | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–ø—Ä–æ—Å–µ |
| GET | `/stats` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ |

### Main Service - Events (–ø–æ—Ä—Ç 8080)

#### –ü—É–±–ª–∏—á–Ω—ã–π API
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/events` | –ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ |
| GET | `/events/{id}` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –ø–æ ID |

#### –ü—Ä–∏–≤–∞—Ç–Ω—ã–π API (–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/users/{userId}/events` | –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è |
| GET | `/users/{userId}/events` | –°–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| GET | `/users/{userId}/events/{eventId}` | –°–æ–±—ã—Ç–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID |
| PATCH | `/users/{userId}/events/{eventId}` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è |

#### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π API
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/admin/events` | –ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π (–∞–¥–º–∏–Ω) |
| PATCH | `/admin/events/{eventId}` | –ú–æ–¥–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è |

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ POST /hit

```json
{
  "app": "ewm-main-service",
  "uri": "/events/1",
  "ip": "192.168.1.1",
  "timestamp": "2024-01-15 10:30:00"
}
```

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ GET /stats

```
GET /stats?start=2024-01-01 00:00:00&end=2024-12-31 23:59:59&uris=/events/1&unique=true
```

---

## üë• –ê–≤—Ç–æ—Ä—ã

–ö–æ–º–∞–Ω–¥–∞ 
@DokPlay 
@Ibragim1111
@VanoStreyPracticum

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
